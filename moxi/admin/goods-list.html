
<!DOCTYPE HTML>
<html>
<head>
	<style>
		#DataTables_Table_0_info{display: none;}
		#DataTables_Table_0_filter>label{display: none;} 
		.dataTables_length{display: none;}
	</style>
<meta charset="utf-8">
<meta name="renderer" content="webkit|ie-comp|ie-stand">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
<link rel="Bookmark" href="favicon.ico" >
<link rel="Shortcut Icon" href="favicon.ico" /> 
<!--[if lt IE 9]>
<script type="text/javascript" src="lib/html5.js"></script>
<script type="text/javascript" src="lib/respond.min.js"></script>
<![endif]-->
<link rel="stylesheet" type="text/css" href="static/h-ui/css/H-ui.min.css" />
<link rel="stylesheet" type="text/css" href="static/h-ui.admin/css/H-ui.admin.css" />
<link rel="stylesheet" type="text/css" href="lib/Hui-iconfont/1.0.8/iconfont.css" />
<link rel="stylesheet" type="text/css" href="static/h-ui.admin/skin/default/skin.css" id="skin" />
<link rel="stylesheet" type="text/css" href="static/h-ui.admin/css/style.css" />
<!--[if IE 6]>
<script type="text/javascript" src="http://lib.h-ui.net/DD_belatedPNG_0.0.8a-min.js" ></script>
<script>DD_belatedPNG.fix('*');</script><![endif]-->
<!--/meta 作为公共模版分离出去-->

<title>图片列表</title>
</head>
<body>
<!--_header 作为公共模版分离出去-->
<header class="navbar-wrapper">
	<div class="navbar navbar-fixed-top">
		<div class="container-fluid cl"> <a class="logo navbar-logo f-l mr-10 hidden-xs" href="#">H-ui.admin</a> <a class="logo navbar-logo-m f-l mr-10 visible-xs" href="#">H-ui</a> <span class="logo navbar-slogan f-l mr-10 hidden-xs">v3.0</span> <a aria-hidden="false" class="nav-toggle Hui-iconfont visible-xs" href="javascript:;">&#xe667;</a>
			<nav class="nav navbar-nav">
				<ul class="cl">
					<li class="dropDown dropDown_hover"><a href="javascript:;" class="dropDown_A"><i class="Hui-iconfont">&#xe600;</i> 新增 <i class="Hui-iconfont">&#xe6d5;</i></a>
						<ul class="dropDown-menu menu radius box-shadow">
							<li><a href="javascript:;" onclick="article_add('添加资讯','article-add.html')"><i class="Hui-iconfont">&#xe616;</i> 资讯</a></li>
							<li><a href="javascript:;" onclick="picture_add('添加资讯','picture-add.html')"><i class="Hui-iconfont">&#xe613;</i> 图片</a></li>
							<li><a href="javascript:;" onclick="product_add('添加资讯','product-add.html')"><i class="Hui-iconfont">&#xe620;</i> 产品</a></li>
							<li><a href="javascript:;" onclick="member_add('添加用户','member-add.html','','510')"><i class="Hui-iconfont">&#xe60d;</i> 用户</a></li>
						</ul>
					</li>
				</ul>
			</nav>
			<nav id="Hui-userbar" class="nav navbar-nav navbar-userbar hidden-xs">
				<ul class="cl">
					<li>超级管理员</li>
					<li class="dropDown dropDown_hover"> <a href="#" class="dropDown_A" id="userName">admin <i class="Hui-iconfont">&#xe6d5;</i></a>
						<ul class="dropDown-menu menu radius box-shadow">
							<!-- //id="userCon" onClick="layer_close()" -->
							<li><a href="javascript:;" onClick="myselfinfo()">个人信息</a></li>
							<li><a href="login.html">切换账户</a></li>
							<li><a href="#">退出</a></li>
						</ul>
					</li>
					<li id="Hui-msg"> <a href="#" title="消息"><span class="badge badge-danger">1</span><i class="Hui-iconfont" style="font-size:18px">&#xe68a;</i></a> </li>
					<li id="Hui-skin" class="dropDown right dropDown_hover"> <a href="javascript:;" class="dropDown_A" title="换肤"><i class="Hui-iconfont" style="font-size:18px">&#xe62a;</i></a>
						<ul class="dropDown-menu menu radius box-shadow">
							<li><a href="javascript:;" data-val="default" title="默认（黑色）">默认（黑色）</a></li>
							<li><a href="javascript:;" data-val="blue" title="蓝色">蓝色</a></li>
							<li><a href="javascript:;" data-val="green" title="绿色">绿色</a></li>
							<li><a href="javascript:;" data-val="red" title="红色">红色</a></li>
							<li><a href="javascript:;" data-val="yellow" title="黄色">黄色</a></li>
							<li><a href="javascript:;" data-val="orange" title="橙色">橙色</a></li>
						</ul>
					</li>
				</ul>
			</nav>
		</div>
	</div>
</header>
<!--/_header 作为公共模版分离出去-->

<!--_menu 作为公共模版分离出去-->
<aside class="Hui-aside">
	
	<div class="menu_dropdown bk_2">
		<dl id="menu-article">
			<dt><i class="Hui-iconfont">&#xe616;</i>商品管理<i class="Hui-iconfont menu_dropdown-arrow">&#xe6d5;</i></dt>
			<dd>
				<ul>
					<li><a href="#" title="资讯管理">商品管理</a></li>
				</ul>
			</dd>
		</dl>
		<dl id="menu-picture">
			<dt class="selected"><i class="Hui-iconfont">&#xe613;</i> 图片管理<i class="Hui-iconfont menu_dropdown-arrow">&#xe6d5;</i></dt>
			<dd style="display:block">
				<ul>
					<li class="current"><a href="picture-list.html" title="图片管理">图片管理</a></li>
				</ul>
			</dd>
		</dl>
	</div>
</aside>
<div class="dislpayArrow hidden-xs"><a class="pngfix" href="javascript:void(0);" onClick="displaynavbar(this)"></a></div>
<!--/_menu 作为公共模版分离出去-->

<section class="Hui-article-box">
	<nav class="breadcrumb"><i class="Hui-iconfont">&#xe67f;</i> 首页 <span class="c-gray en">&gt;</span> 图片管理 <span class="c-gray en">&gt;</span> 图片列表 <a class="btn btn-success radius r" style="line-height:1.6em;margin-top:3px" href="javascript:location.replace(location.href);" title="刷新" ><i class="Hui-iconfont">&#xe68f;</i></a></nav>
	<div class="Hui-article">
		<article class="cl pd-20">
			<!-- <div class="text-c"> 日期范围：
				<input type="text" onfocus="WdatePicker({maxDate:'#F{$dp.$D(\'logmax\')||\'%y-%M-%d\'}'})" id="logmin" class="input-text Wdate" style="width:120px;">
				-
				<input type="text" onfocus="WdatePicker({minDate:'#F{$dp.$D(\'logmin\')}',maxDate:'%y-%M-%d'})" id="logmax" class="input-text Wdate" style="width:120px;">
				<input type="text" name="" id="" placeholder=" 图片名称" style="width:250px" class="input-text">
				<button name="" id="" class="btn btn-success" type="submit"><i class="Hui-iconfont">&#xe665;</i> 搜图片</button>
			</div> -->
			<div class="cl pd-5 bg-1 bk-gray mt-20"> <span class="l"><a href="javascript:;" id="selectDel" onclick="datadel()" class="btn btn-danger radius"><i class="Hui-iconfont">&#xe6e2;</i> 批量删除</a> <a class="btn btn-primary radius" onclick="picture_add('添加商品','goods-add.html')" href="javascript:;"><i class="Hui-iconfont">&#xe600;</i> 添加商品</a></span> <span class="r">共有数据：<strong id="total"></strong> 条</span> </div>
			<div style="float: left;margin-right: 50px;padding: 20px 0">搜索：<input type="text" id="search" placeholder ="折扣价格/商品"><button id="searchBtn">确定</button></div>
			<div style="float: right;padding: 20px 0"><button id="priceUp">升序</button><button id="priceDown">降序</button></div>
			<div class="mt-20">
				<table class="table table-border table-bordered table-bg table-hover table-sort">
					<thead>
						<tr class="text-c">
							<th width="40"><input id="checkAll" name="" type="checkbox" value=""></th>
							<th width="80">ID</th>
							<th width="100">名称</th>
							<th width="100">图片</th>
							<th>编码（id）</th>
							<th width="150">折扣价</th>
							<th width="150">价格</th>
							<th width="60">发布状态</th>
							<th width="100">操作</th>
						</tr>
					</thead>
					<tbody>
					</tbody>
				</table>
			</div>
			<button onclick="goPage('first')">首页</button>
			<button onclick="goPage('prev')">上一页</button>
			 <span>当前页/共几页</span>
			<input type="" name="" id="jump" >
			<button onclick="goPage('jump')">Go</button>
			<button onclick="goPage('next')">下一页</button>
			<button onclick="goPage('last')">末页</button>
		</article>
	</div>
</section>
<script src="/admin/common.js"></script>

<!--_footer 作为公共模版分离出去-->
<script type="text/javascript" src="lib/jquery/1.9.1/jquery.min.js"></script> 
<script type="text/javascript" src="lib/layer/2.4/layer.js"></script>
<script type="text/javascript" src="static/h-ui/js/H-ui.js"></script>
<script type="text/javascript" src="static/h-ui.admin/js/H-ui.admin.page.js"></script>
<!--/_footer /作为公共模版分离出去-->

<!--请在下方写此页面业务相关的脚本-->
<script type="text/javascript" src="lib/My97DatePicker/4.8/WdatePicker.js"></script>
<!-- <script type="text/javascript" src="lib/datatables/1.10.0/jquery.dataTables.min.js"></script> -->
<script type="text/javascript" src="lib/laypage/1.2/laypage.js"></script>
<script type="text/javascript">
let rootPath='http://127.0.0.1:2998';
var userCon = document.querySelector('#userCon');
// userCon.onclick = function(){
// 	location.href = './system-log.html';
// }
//批量删除=============
var $tbody = $('tbody');
console.log($tbody);
var arrId = [];
// 事件委托，判断checked是否勾选，存入当前id到数组
$tbody.on('click','#Check',function(){
	var $check = $(this).children().children('#check');
	if($check.is(':checked')){
		arrId.push($(this).children('.text-l').children('.ID').html());
	}else{
		for(var i=0;i<arrId.length;i++){
			if(arrId[0]==($(this).children('.text-l').children('.ID').html())){
				arrId.splice(i,1);
			}
			else if(arrId[i] == ( $(this).children('.text-l').children('.ID').html())){
				arrId.splice(i,i+1);
			}
		}	
	}
	$check.attr('checked') != $check.attr('checked');
	var $checkAll = $(this).parent('tbody').prev('thead').children().children().children('#checkAll');
	if($checkAll.is(':checked')){
		console.log(33333);
	}
})
// 批量删除============
var selectDel = document.querySelector('#selectDel');
selectDel.onclick = function(){
	var checkAll = document.querySelector('#checkAll');
	// 判断是否全部勾选
	if(checkAll.checked){
		// var checkS = document.querySelectorAll('#check');
		var checkIDs = document.querySelectorAll('.ID');
		var checkARR = [];
			// console.log('勾选',checkIDs);
		for(var i=0;i<checkIDs.length;i++){
			checkARR.push(checkIDs[i].innerHTML);
		}
		// console.log(checkARR);
		var url = rootPath + '/goodsAdmin/someDel';
		var data = {IDs: JSON.stringify(checkARR)};
		console.log(11111111111,data);
		$.post(url,data,function(res){
			if(res.err ==0){
				window.location.reload();
			}else if(res.err ==-1){
				alert('网络错误');
			}
		})		
	}
	// 没有全部勾选则删除当前勾选按钮
	var url = rootPath + '/goodsAdmin/someDel';
	var data = {IDs: JSON.stringify(arrId)};
	console.log(11111111111,data);
	$.post(url,data,function(res){
		if(res.err ==0){
			window.location.reload();
		}else if(res.err ==-1){
			alert('网络错误');
		}
	})
}
	// var checkAll = document.querySelectorAll('#check');
	// var checkS = document.querySelectorAll('#ID');
	// var checkIDs = [];
	// for(var i=0;i<checkAll.length;i++){
	// 	if(checkAll[i].checked){
	// 		for(var i=0;i<checkS.length;i++){
	// 			checkIDs.push(checkS[i].innerHTML);
	// 		}
	// 	}		
	// }
	// console.log(checkIDs);
	// var url = rootPath + '/goodsAdmin/someDel';
	// var data = {IDs: JSON.stringify(checkIDs)};
	// console.log(11111111111,data);
	// $.post(url,data,function(res){
	// 	if(res.err ==0){
	// 		window.location.reload();
	// 	}else if(res.err ==-1){
	// 		alert('网络错误');
	// 	}
	// })
	// }

	// var url = rootPath + '/goodsAdmin/someDel';
	// var data = {IDs: JSON.stringify(arrId)};
	// console.log(11111111111,data);
	// $.post(url,data,function(res){
	// 	if(res.err ==0){
	// 		window.location.reload();
	// 	}else if(res.err ==-1){
	// 		alert('网络错误');
	// 	}
	// })

// 价格排序状态===============================================================================
// var pricestate = true;
// 分页状态
// var pagestate = false;
// 模糊查询状态
// var searchstate = false;


//获取当前用户信息，渲染用户名	=======
var userCookie = Cookie.get('userCookie') || [];
if(typeof userCookie == 'string'){
    userCookie = JSON.parse(userCookie);
}
var userName = document.querySelector('#userName'); 
for(var i=0;i<userCookie.length;i++){
	userName.innerHTML = userCookie[i].username;
}

var $tbody = $('tbody');
console.log($tbody);
// 价格排序=====
// 升序=========
var priceUp = document.querySelector('#priceUp');
var sort = true;
// if(pricestate){
	priceUp.onclick = function(){
		$('tbody').html('');
		// $tbody.html('');		
			var url = rootpath + '/goodsAdmin/sortup';
			$.post(url,function(res){
				console.log(res);
				var resData = res.data.slice(0,3);
				let td = '';
				for(var i=0;i<resData.length;i++){
				let list = `<tr class="text-c" id="Check"><td><input id="check" name="" type="checkbox" value=""></td>
				<td>${i+1}</td>
				<td>${resData[i]['goodsname']}</td>
				<td><a href="javascript:;" onClick="picture_edit('图库编辑','picture-show.html','10001')"><img width="50" class="picture-thumb" src="${resData[i]['url']}"></a></td>
				<td class="text-l"><a class="ID" class="maincolor" href="javascript:;" onClick="picture_edit('图库编辑','goods-update.html','${resData[i]['_id']}')">${resData[i]['_id']}</a></td>
				<td class="text-c">${resData[i]['offprice']*1}</td>
				<td>${resData[i]['price']}</td>
				<td class="td-status"><span class="label label-success radius">已发布</span></td>
				<td class="td-manage">
				<a style="text-decoration:none" class="ml-5" onClick="picture_edit('图库编辑','goods-update.html','${resData[i]['_id']}')" href="javascript:;" title="编辑"><i class="Hui-iconfont">&#xe6df;</i></a>
				<a style="text-decoration:none" class="ml-5" onClick="picture_del(this,'${resData[i]['_id']}')" href="javascript:;" title="删除"><i class="Hui-iconfont">&#xe6e2;</i></a></td></tr>`;
				td+= list;
				}
				$('tbody').html(td);
			})
	}
	// pricestate != pricestate;
// <!-- } -->


// 降序===========
var priceDown = document.querySelector('#priceDown');
priceDown.onclick = function(){
		// $tbody.html('');
		// var url = rootpath + '/goodsAdmin/sortdown';
		// $.post(url,function(res){
			// var resData = res.data.slice(0,3);
			// page(resData);
			// $('tbody').html(td);
		// <!-- }) -->

		$('tbody').html('');
	// $tbody.html('');		
		var url = rootpath + '/goodsAdmin/sortdown';
		$.post(url,function(res){
			console.log(res);
			var resData = res.data.slice(0,3);
			let td = '';

			for(var i=0;i<resData.length;i++){
			let list = `<tr class="text-c" id="Check"><td><input id="check" name="" type="checkbox" value=""></td>
			<td>${i+1}</td>
			<td>${resData[i]['goodsname']}</td>
			<td><a href="javascript:;" onClick="picture_edit('图库编辑','picture-show.html','10001')"><img width="50" class="picture-thumb" src="${resData[i]['url']}"></a></td>
			<td class="text-l"><a class="ID" class="maincolor" href="javascript:;" onClick="picture_edit('图库编辑','goods-update.html','${resData[i]['_id']}')">${resData[i]['_id']}</a></td>
			<td class="text-c">${resData[i]['offprice']*1}</td>
			<td>${resData[i]['price']}</td>
			<td class="td-status"><span class="label label-success radius">已发布</span></td>
			<td class="td-manage">
			<a style="text-decoration:none" class="ml-5" onClick="picture_edit('图库编辑','goods-update.html','${resData[i]['_id']}')" href="javascript:;" title="编辑"><i class="Hui-iconfont">&#xe6df;</i></a>
			<a style="text-decoration:none" class="ml-5" onClick="picture_del(this,'${resData[i]['_id']}')" href="javascript:;" title="删除"><i class="Hui-iconfont">&#xe6e2;</i></a></td></tr>`;
			td+= list;
			}
			// page(resData);
			$('tbody').html(td);
		})

}


//分页查询==========
let  rootpath='http://127.0.0.1:2998';
// let currentPage = 1;
let pagesize = 3;
// 定义当前页面
let nowpage = 1;

// 定义总数据量
let totoal = 0
// page一开始是没有值的，先默认值为1，点击的时候根据当前的页码+1 ，-1
getGoods(1);
function getGoods(page){
	// $tbody.html('');
	let url = rootpath+'/goodsAdmin/getGoods';
	let data = {
		pagesize: pagesize,
		page: page
	}
	nowpage = page;
	$.post(url,data,function(res){
		console.log(res);
		load(res.data);
		$('#total').html(res.data.total);
		total = res.data.total;
	})
}

// 渲染页面==========
function load(data){
	$tbody.html('');
	if(data.goodslist.length>0){
		// page(data.goodslist);
		// 创建元素渲染页面
		let td ='';
		for(var i=0;i<data.goodslist.length;i++){
		let list = `<tr class="text-c" id="Check"><td><input id="check" name="" type="checkbox" value=""></td>
			<td>${i+1}</td>
			<td>${data['goodslist'][i]['goodsname']}</td>
			<td><a href="javascript:;" onClick="picture_edit('图库编辑','picture-show.html','10001')"><img width="50" class="picture-thumb" src="${data['goodslist'][i]['url']}"></a></td>
			<td class="text-l"><a class="ID" class="maincolor" href="javascript:;" onClick="picture_edit('图库编辑','goods-update.html','${data['goodslist'][i]['_id']}')">${data['goodslist'][i]['_id']}</a></td>
			<td class="text-c">${data['goodslist'][i]['offprice']*1}</td>
			<td>${data['goodslist'][i]['price']}</td>
			<td class="td-status"><span class="label label-success radius">已发布</span></td>
			<td class="td-manage">
		 	<a style="text-decoration:none" class="ml-5" onClick="picture_edit('图库编辑','goods-update.html','${data['goodslist'][i]['_id']}')" href="javascript:;" title="编辑"><i class="Hui-iconfont">&#xe6df;</i></a>
		 	<a style="text-decoration:none" class="ml-5" onClick="picture_del(this,'${data['goodslist'][i]['_id']}')" href="javascript:;" title="删除"><i class="Hui-iconfont">&#xe6e2;</i></a></td></tr>`;
			td+= list;
		}
		$('tbody').html(td);
	}else{
		console.log('没有数据');
	}
}

// 分页跳转======
function goPage(type){
	$tbody.html('');
	// $('tbody').html('');
	//page标书目标页
   let page=1;
   switch (type) {
   	 case 'first' : 
   	 page=1;
   	 break;
   	 case 'last' : 
   	 page=Math.ceil(total/pagesize);
   	 break;
   	  case 'jump' : 
   	 page=$('#jump').val()
   	 break;
   	 case 'prev':
   	 page=nowpage-1
   	 //边界判断
   	 break;
   	  case 'next':
   	 page=nowpage+1
   	 break;
   }
getGoods(page);
}


// 搜索查询（模糊查询）========
let search = $("#search");
let searchBtn = $("#searchBtn");
searchBtn.on('click',function(){
	let searchVal = search.val();
	let url = rootpath+'/goodsAdmin/findGoods';
	console.log(searchVal);
	let data = {
		searchVal: searchVal,
	}
	$.post(url,data,function(res){
		console.log(res.data);
		var resData = res.data;
		console.log(res);
		if(resData.length>0){
			// 创建元素渲染页面
			let td ='';
			for(var i=0;i<resData.length;i++){
			let list = `<tr class="text-c" id="Check"><td><input id="check" name="" type="checkbox" value=""></td>
				<td>${i+1}</td>
				<td>${resData[i]['goodsname']}</td>
				<td><a href="javascript:;" onClick="picture_edit('图库编辑','picture-show.html','10001')"><img width="50" class="picture-thumb" src="${resData[i]['url']}"></a></td>
				<td class="text-l"><a class="ID" class="maincolor" href="javascript:;" onClick="picture_edit('图库编辑','goods-update.html','${resData[i]['_id']}')">${resData[i]['_id']}</a></td>
				<td class="text-c">${resData[i]['price']}</td>
				<td>${resData[i]['offprice']}</td>
				<td class="td-status"><span class="label label-success radius">已发布</span></td>
				<td class="td-manage">
				<a style="text-decoration:none" class="ml-5" onClick="picture_edit('图库编辑','goods-update.html','${resData[i]['_id']}')" href="javascript:;" title="编辑"><i class="Hui-iconfont">&#xe6df;</i></a>
				<a style="text-decoration:none" class="ml-5" onClick="picture_del(this,'${resData[i]['_id']}')" href="javascript:;" title="删除"><i class="Hui-iconfont">&#xe6e2;</i></a></td></tr>`;
				td+= list;
			}
			$('tbody').html(td);
			$('#total').html(res.data.total);
			total = res.data.total;
		}else{
			console.log('没有数据');
		}

	})
})

// =================================================================================================================

$('.table-sort').dataTable({
	"aaSorting": [[ 1, "desc" ]],//默认第几个排序
	"bStateSave": true,//状态保存
	"aoColumnDefs": [
	  //{"bVisible": false, "aTargets": [ 3 ]} //控制列的隐藏显示
	  {"orderable":false,"aTargets":[0,8]}// 制定列不参与排序
	]
});
/*图片-添加*/
function picture_add(title,url){
	var index = layer.open({
		type: 2,
		title: title,
		content: url
	});
	layer.full(index);
}
/*图片-查看*/
function picture_show(title,url,id){
	var index = layer.open({
		type: 2,
		title: title,
		content: url
	});
	layer.full(index);
}
/*图片-审核*/
function picture_shenhe(obj,id){
	layer.confirm('审核文章？', {
		btn: ['通过','不通过'], 
		shade: false
	},
	function(){
		$(obj).parents("tr").find(".td-manage").prepend('<a class="c-primary" onClick="picture_start(this,id)" href="javascript:;" title="申请上线">申请上线</a>');
		$(obj).parents("tr").find(".td-status").html('<span class="label label-success radius">已发布</span>');
		$(obj).remove();
		layer.msg('已发布', {icon:6,time:1000});
	},
	function(){
		$(obj).parents("tr").find(".td-manage").prepend('<a class="c-primary" onClick="picture_shenqing(this,id)" href="javascript:;" title="申请上线">申请上线</a>');
		$(obj).parents("tr").find(".td-status").html('<span class="label label-danger radius">未通过</span>');
		$(obj).remove();
    	layer.msg('未通过', {icon:5,time:1000});
	});	
}
/*图片-下架*/
function picture_stop(obj,id){
	layer.confirm('确认要下架吗？',function(index){
		$(obj).parents("tr").find(".td-manage").prepend('<a style="text-decoration:none" onClick="picture_start(this,id)" href="javascript:;" title="发布"><i class="Hui-iconfont">&#xe603;</i></a>');
		$(obj).parents("tr").find(".td-status").html('<span class="label label-defaunt radius">已下架</span>');
		$(obj).remove();
		layer.msg('已下架!',{icon: 5,time:1000});
	});
}

/*图片-发布*/
function picture_start(obj,id){
	layer.confirm('确认要发布吗？',function(index){
		$(obj).parents("tr").find(".td-manage").prepend('<a style="text-decoration:none" onClick="picture_stop(this,id)" href="javascript:;" title="下架"><i class="Hui-iconfont">&#xe6de;</i></a>');
		$(obj).parents("tr").find(".td-status").html('<span class="label label-success radius">已发布</span>');
		$(obj).remove();
		layer.msg('已发布!',{icon: 6,time:1000});
	});
}
/*图片-申请上线*/
function picture_shenqing(obj,id){
	$(obj).parents("tr").find(".td-status").html('<span class="label label-default radius">待审核</span>');
	$(obj).parents("tr").find(".td-manage").html("");
	layer.msg('已提交申请，耐心等待审核!', {icon: 1,time:2000});
}
/*图片-编辑*/
function picture_edit(title,url,id){
	let storage=window.localStorage//获取storage对象
	storage.setItem("updateId",id)//添加缓存
	var index = layer.open({
		type: 2,
		title: title,
		content: url
	});
	layer.full(index);
}
/*图片-删除*/
// 点击删除发起请求删除数据
function picture_del(obj,id){
	layer.confirm('确认要删除吗？',function(index){
		$.post(rootpath+'/goodsAdmin/delGood/',{id:id},function(res){
			if (res.err==0) {
				$(obj).parents("tr").remove();
		        layer.msg('已删除!',{icon:1,time:1000});
		        //假的刷新
		       // getListData()真刷新
			}
		})
		// $(obj).parents("tr").remove();
		// layer.msg('已删除!',{icon:1,time:1000});
	});
}
</script>
<!--/请在上方写此页面业务相关的脚本-->
</body>
</html>